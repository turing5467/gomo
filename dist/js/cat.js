"use strict";var _slicedToArray=function(a,e){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(a,e){var t=[],r=!0,c=!1,i=void 0;try{for(var n,s=a[Symbol.iterator]();!(r=(n=s.next()).done)&&(t.push(n.value),!e||t.length!==e);r=!0);}catch(a){c=!0,i=a}finally{try{!r&&s.return&&s.return()}finally{if(c)throw i}}return t}(a,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function render(a){$('<ul class="product-lists clearfix" id="product-box">').html(function(){return a.map(function(a){var e=a.small_pics.split(","),t=0==a.promotion.length?[]:a.promotion.split(","),r="null"==a.shop_name?"":"<a class=nname>"+a.shop_name+"</a>",c=e.map(function(a){return'<li class="icon-li current already"><img src='+a+"></li>"}).join("");prom_text=null==a.prom_text?"":"<p class=item-promotional-language>"+a.prom_text+"</p>";var i=t.map(function(a){return"<span class=promotion-normal>"+a+"</span>"}).join(""),n="true"==a.shop_zy_tag?"<span class=nnamezy>自营</span>":"",s='<p class="item-option clearfix">\t            <span class="add-contrast" cid="A0004958764/pop8010690303" title="对比"><i class="icon"></i></span>\t            <span class="add-collection" pid="A0004958764" skuid="pop8007961586" pname='+a.name+' title="收藏"><i class="icon"></i></span>\t            \t            <a class="add-cart addTo-cart" href="javascript:void(0);" title="加入购物车"><i class="icon"></i></a>\t            \t            \t                \t     <span title="在线客服" class="gomekf online-server"><i class="icon"></i></span></p>';return"<li class=product-item id="+a.code+'>\n        <div class=item-tab>\n            <p class="item-pic"><a class=item-link href=\'./detail.html?code='+a.code+"' title="+a.name+"><img src="+e[0].replace("_30","_210")+" alt="+a.name+'></a></p>\n            <div class=item-pic-small-box>\n                <a href=javascript:void(0); class="icon-prev disable">\n                <a href=javascript:void(0); class="icon-next  disable"></a>\n                <div class=item-pic-small-wrap>\n                    <ul class=imgList>'+c+"</ul>\n                </div>\n            </div>\n            <p class=item-price><span class=price>¥"+a.price+'</span></p>\n            <p class="item-name"><a class="item-link" href="//item.gome.com.cn/A0004958764-pop8007961586.html" target="_blank" title='+a.name+">"+a.name+"</a></p>\n            "+prom_text+'\n            <p class=item-comment-dispatching>\n                <span class=dispatching></span>\n                <a class=comment href=javascript:;>\n                        <span class="grey">已有</span>'+a.comment+'<span class="grey">人评价</span>\n                </a>\n            </p>\n            <p class=item-shop>'+n+r+"</p>\n            <p class=item-promotion>"+i+"</p>\n            "+s+"\n        </div>\n            </li>"})}).appendTo($(".product-box").eq(0)),$(".imgList").on("mouseenter","img",function(a){var e=$(a.currentTarget).attr("src");$(a.currentTarget).parents(".product-item").find(".item-pic img").attr("src",e.replace("_30","_210"))}),$(".addTo-cart").click(function(a){var e=Cookie.get("userId"),t=$(a.target).parents(".product-item").attr("id");$.ajax({type:"post",url:"../server/addToCart.php",data:{id:e,product_code:t,num:1,type:1,flag:0},success:function(a){a&&(window.location.href="./add_cart_succeed.html?code="+t+"&num=1&type=1")}})})}function getType(){var a=$(".filter-order-box .cur"),e=void 0;switch(a.index()){case 0:e=0;break;case 1:e=1;break;case 2:e=a.is(".price-up")?2:3}return e}$(function(){$.ajaxSetup({url:"../server/getProductData.php",global:!1,type:"get",dataType:"json",success:function(a){"success"==a.status&&render(a.data)}});var r=!0;$("#sort-price").click(function(a){$(".product-box").eq(0).html(""),kkpager.selectPage(1);var e=$(a.currentTarget);e.addClass("cur").siblings().removeClass("cur");var t=void 0;t=1==r?(e.addClass("price-up").removeClass("price-down"),1):(e.addClass("price-down").removeClass("price-up"),2),r=!r,$.ajax({data:{page:0,type:t}})}),$("#sort-general").click(function(a){$(".product-box").eq(0).html(""),kkpager.selectPage(1),$(a.currentTarget).addClass("cur").siblings().removeClass("cur"),$.ajax({data:{page:0,type:0}})}),$("#sort-comment").click(function(a){$(".product-box").eq(0).html(""),kkpager.selectPage(1),$(a.currentTarget).addClass("cur").siblings().removeClass("cur"),$.ajax({data:{page:0,type:3}})});var c=$("#fc-lowPrice"),i=$("#fc-highPrice"),a=$("#fc-btn-cancel"),e=$("#fc-btn-ok"),t=($(".priceRange-input"),$(".filter-priceRange-box").eq(0));t.mouseleave(function(a){t.removeClass("filter-priceRange-click")}),t.on("click",".priceRange-input",function(a){t.addClass("filter-priceRange-click")}),a.click(function(a){c.val("¥"),i.val("¥")}),e.click(function(){var a=1*c.val().replace("¥","").trim(),e=1*i.val().replace("¥","").trim();if(e<a){var t=[e,a];a=t[0],e=t[1]}a&&e&&($(".product-box").eq(0).html(""),$.ajax({data:{page:0,type:4,low_price:a,high_price:e}}))}),$(".facets-category-common").eq(0).find(".facet").click(function(a){a.preventDefault();var e=void 0,t=void 0;if(-1!=$(a.target).text().indexOf("-")){var r=$(a.target).text().trim().split("-"),c=_slicedToArray(r,2);e=c[0],t=c[1]}else e=1e4,t=1e6;$(".product-box").eq(0).html(""),$.ajax({data:{page:0,type:4,low_price:1*e,high_price:1*t}})})});