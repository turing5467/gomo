"use strict";var _slicedToArray=function(a,e){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(a,e){var t=[],n=!0,c=!1,s=void 0;try{for(var i,r=a[Symbol.iterator]();!(n=(i=r.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(a){c=!0,s=a}finally{try{!n&&r.return&&r.return()}finally{if(c)throw s}}return t}(a,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function render(a){$('<ul class="product-lists clearfix" id="product-box">').html(function(){return a.map(function(a){var e=a.small_pics.split(","),t=0==a.promotion.length?[]:a.promotion.split(","),n="null"==a.shop_name?"":"<a class=nname>"+a.shop_name+"</a>",c=e.map(function(a){return'<li class="icon-li current already"><img src='+a+"></li>"}).join("");prom_text=null==a.prom_text?"":"<p class=item-promotional-language>"+a.prom_text+"</p>";var s=t.map(function(a){return"<span class=promotion-normal>"+a+"</span>"}).join(""),i="true"==a.shop_zy_tag?"<span class=nnamezy>自营</span>":"",r='<p class="item-option clearfix">\t            <span class="add-contrast" cid="A0004958764/pop8010690303" title="对比"><i class="icon"></i></span>\t            <span class="add-collection" pid="A0004958764" skuid="pop8007961586" pname='+a.name+' title="收藏"><i class="icon"></i></span>\t            \t            <a class="add-cart addTo-cart" href="javascript:void(0);" title="加入购物车"><i class="icon"></i></a>\t            \t            \t                \t     <span title="在线客服" class="gomekf online-server"><i class="icon"></i></span></p>';return"<li class=product-item id="+a.code+'>\n        <div class=item-tab>\n            <p class="item-pic"><a class=item-link href=\'./detail.html?code='+a.code+"' title="+a.name+"><img src="+e[0].replace("_30","_210")+" alt="+a.name+'></a></p>\n            <div class=item-pic-small-box>\n                <a href=javascript:void(0); class="icon-prev disable">\n                <a href=javascript:void(0); class="icon-next  disable"></a>\n                <div class=item-pic-small-wrap>\n                    <ul class=imgList>'+c+"</ul>\n                </div>\n            </div>\n            <p class=item-price><span class=price>¥"+a.price+'</span></p>\n            <p class="item-name"><a class="item-link" href="//item.gome.com.cn/A0004958764-pop8007961586.html" target="_blank" title='+a.name+">"+a.name+"</a></p>\n            "+prom_text+'\n            <p class=item-comment-dispatching>\n                <span class=dispatching></span>\n                <a class=comment href=javascript:;>\n                        <span class="grey">已有</span>'+a.comment+'<span class="grey">人评价</span>\n                </a>\n            </p>\n            <p class=item-shop>'+i+n+"</p>\n            <p class=item-promotion>"+s+"</p>\n            "+r+"\n        </div>\n            </li>"})}).appendTo($(".product-box").eq(0)),$(".imgList").on("mouseenter","img",function(a){var e=$(a.currentTarget).attr("src");$(a.currentTarget).parents(".product-item").find(".item-pic img").attr("src",e.replace("_30","_210"))}),$(".addTo-cart").click(function(a){var e=Cookie.get("userId"),t=$(a.target).parents(".product-item").attr("id");$.ajax({type:"post",url:"../server/addToCart.php",data:{id:e,product_code:t,num:1,type:1,flag:0},success:function(a){a&&(window.location.href="./add_cart_succeed.html?code="+t+"&num=1&type=1")}})})}function getType(){var a=$(".filter-order-box .cur"),e=void 0;switch(a.index()){case 0:e=0;break;case 1:e=1;break;case 2:e=a.is(".price-up")?2:3}return e}$(function(){$.ajaxSetup({url:"../server/getProductData.php",global:!1,type:"get",dataType:"json",success:function(a){"success"==a.status&&render(a.data)}}),$.getJSON("../server/hot_tj.json",function(a){$("#hot-list").html(function(){return a.map(function(a){return'\n                <li class=item>\n                    <p class="pic">\n                        <a href=# title=\''+a.name+"'>\n                        <img src="+a.pic+" alt="+a.name+"></a>\n                    </p>\n                    <p class=name>\n                        <a href=# title='"+a.name+"'>"+a.name+"</a>\n                    </p>\n                    <p class=price>"+a.price+"</p>\n                    <p class=btn>\n                        <a class=buy href=#>立即抢购</a>\n                    </p>\n                </li>\n                "}).join("")})});var n=$(".nSearch-facets").eq(0);new Promise(function(t){$.getJSON("../server/facets.json",function(a){var e=$('<div id=facets-category-brand class="facets-category clearfix"></div>').appendTo(n);e.append("<span class=fc-key><b>品牌：</b></span>"),$("<div>").addClass("fc-content").html(function(){return'<ul class="category-brand clearfix">'+a.brands.map(function(a){return'<li class=c-brand>\n                                    <a href="javascript:;" name='+a.title+" style="+a.style+">\n                                        "+a.title+"\n                                    </a>\n                                </li>"}).join("")+"</ul>"}).appendTo(e),a.commonFacets.forEach(function(a){var e=$("<div>").addClass("facets-category facets-category-common  clearfix");e.append('<span class="fc-key fir">'+a.key+"</span>"),$("<div>").addClass("fc-content").html(function(){return"<ul class=clearfix>"+a.contents.map(function(a){return'<li><a class="facet">'+a+"</a></li>"}).join("")+"<ul>"}).appendTo(e),e.appendTo(n)}),t()})}).then(function(){n.find(".facets-category-common:gt(3)").addClass("fc-hide"),n.append('<div class="fccc-control-warp">\n            <span class="fccc-control" id="fc-common-show">更多选项（屏幕规格,显卡类型,硬盘容量,内存容量,操作系统,Game+游戏装备）</span>\n            <span class="fccc-up" id="fc-common-hide">收起&nbsp;&nbsp;</span>\n        </div>');var a=n.find(".fccc-control").eq(0),e=n.find(".fccc-up").eq(0),t=a.parent();a.click(function(a){$(".fc-hide").removeClass("fc-hide"),t.addClass("show")}),e.click(function(a){$(".facets-category-common:gt(3)").addClass("fc-hide"),t.removeClass("show")}),$(".facets-category-common").eq(0).find(".facet").click(function(a){a.preventDefault();var e=void 0,t=void 0;if(-1!=$(a.target).text().indexOf("-")){var n=$(a.target).text().trim().split("-"),c=_slicedToArray(n,2);e=c[0],t=c[1]}else e=1e4,t=1e6;$(".product-box").eq(0).html(""),$.ajax({data:{page:0,type:4,low_price:1*e,high_price:1*t}})})});var c=$(".product-right-box").eq(0);$.getJSON("../server/productLeft.json",function(a){var e=$("<div id=prdRight-2>").appendTo(c),t=$("<div class=prd-right-normal>").appendTo(e);t.append("<h3 class=hd>"+a[0].title+"</h3>"),$('<ul class="sell-product">').html(function(){return a[0].lists.map(function(a,e){return'<li class=active>\n                                        <p class="num num'+(e+1)+'">'+(e+1)+"</p>\n                                        <div class=pdetail>\n                                            <p class=pic>\n                                                <a class=bigD_item><img src="+a.pic+"></a>\n                                            </p>    \n                                            <p class=name>\n                                                <a class=bigD_item>"+a.name+"</a>\n                                            </p>\n                                            <p class=price>"+a.price+"</p>\n                                        </div>\n                                    </li>"}).join("")}).appendTo(t),a.slice(1).forEach(function(a,e){var t=$("<div id=prdRight-"+(e+3)+">").appendTo(c),n=$("<div class=prd-right-normal>").appendTo(t);n.append("<h3 class=hd>"+a.title+"</h3>"),$("<ul class=bd id=bigD_liulan>").html(function(){return a.lists.map(function(a,e){return"<li class=buy-items>\n                                            <div class=pic>\n                                                <a class=bigD_item><img src="+a.pic+"></a>\n                                            </div>    \n                                            <div class=price>"+a.price+"</div>\n                                            <div class=name>\n                                                <a class=bigD_item>"+a.name+"</a>\n                                            </div>\n                                    </li>"}).join("")}).appendTo(n)})}),$.ajax({type:"get",url:"../server/getProductData.php?version=2",data:{page:0,type:0},dataType:"json",success:function(a){render(a.data),$(".item-link").each(function(a,e){var t="./detail.html?code="+$(e).parents("li").attr("id");$(e).attr("href",t)})}}),$.ajax({type:"get",url:"../server/getPageCount.php",dataType:"json",success:function(a){kkpager.generPageHtml({pno:1,total:a[1],totalRecords:a[0],mode:"click",click:function(a){this.selectPage(a),$(".product-box").eq(0).html(""),$.ajax({type:"get",url:"../server/getProductData.php",data:{page:a-1,type:getType()},dataType:"json",success:function(a){"success"==a.status&&render(a.data)}})}})}});var s=!0;$("#sort-price").click(function(a){$(".product-box").eq(0).html(""),kkpager.selectPage(1);var e=$(a.currentTarget);e.addClass("cur").siblings().removeClass("cur");var t=void 0;t=1==s?(e.addClass("price-up").removeClass("price-down"),1):(e.addClass("price-down").removeClass("price-up"),2),s=!s,$.ajax({data:{page:0,type:t}})}),$("#sort-general").click(function(a){$(".product-box").eq(0).html(""),kkpager.selectPage(1),$(a.currentTarget).addClass("cur").siblings().removeClass("cur"),$.ajax({data:{page:0,type:0}})}),$("#sort-comment").click(function(a){$(".product-box").eq(0).html(""),kkpager.selectPage(1),$(a.currentTarget).addClass("cur").siblings().removeClass("cur"),$.ajax({data:{page:0,type:3}})});var i=$("#fc-lowPrice"),r=$("#fc-highPrice"),a=$("#fc-btn-cancel"),e=$("#fc-btn-ok"),t=($(".priceRange-input"),$(".filter-priceRange-box").eq(0));t.mouseleave(function(a){t.removeClass("filter-priceRange-click")}),t.on("click",".priceRange-input",function(a){t.addClass("filter-priceRange-click")}),a.click(function(a){i.val("¥"),r.val("¥")}),e.click(function(){var a=1*i.val().replace("¥","").trim(),e=1*r.val().replace("¥","").trim();if(e<a){var t=[e,a];a=t[0],e=t[1]}a&&e&&($(".product-box").eq(0).html(""),$.ajax({data:{page:0,type:4,low_price:a,high_price:e}}))})});