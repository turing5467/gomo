"use strict";function renderOneShop(o){var e=$(".cart-list").eq(0);$('<div class="cart-shop-header "></div>').html(function(){return'\n        <div class="cart-col-1">\n            <div class="good-checkboxs-no checkShop" style="margin-top: 13px;">       \n                <input type="checkbox" style="display: none;">      \n            </div>\n        </div>\n        <div class="cart-col-2">\n            <a href="//mall.gome.com.cn/80006441/" title="永兴电脑专营店" class="black cart-shop-name cart-shop-name-fixed " target="_blank">'+o.shop_name+'</a>                             <span style="display: inline-block" class="cart-kf cart-header-kf customerServiceAshes" data-shopname="'+o.shop_name+'">      \n                <i style="cursor: pointer;vertical-align: middle;" class="c-i c-kf-on"></i>      \n                <span class="contact-customer-word contact-font">在线客服</span>\n            </span>\n        </div>\n        '}).appendTo(e),$('<div class="cart-shop-goods cart-shop-goods-normal"></div>').html(function(){return o.products.map(function(o){return'<div class="cart-shop-good clearfix  cart-shop-good-common" id='+o[0]+'>\n                <div class="cart-col-1 border-top ">\n                    <div class="good-checkboxs-no checkItem">        \n                        <input type="checkbox" name="good" style="display: none;">\n                    </div>\n                </div>\n                <div class="cart-col-2" style="height: 82px;">\n                    <a href="./detail.html?code='+o[0]+'" target="_blank" class="g-img">\n                        <img src='+o[2].split(",")[0].replace("_30","_80")+' alt="">           </a>  </div>  <div class="fl">   <div class="clearfix">    <div style="" class="cart-col-3">     <div class="cart-good-name">            <a href="./detail.html?code='+o[0]+'" target="_blank" title="'+o[1]+'">'+o[1]+"("+o[6].split(",")[o[7]-1]+')</a>     </div>     <div class="support-server clearfix">                   <i class="c-i seven border-radius-icon" title="支持7天无理由退货"></i>                 </div>                             </div>                  \n                        <div class="cart-col-8">\n                            <div class="cart-good-pro">\n                                <div class="cart-saleprops-text">\n                                    <div class="cart-salesPro-item">              <span class="cart-good-key" title="版本">版本</span>                          <span class="cart-good-value" data-type='+o[7]+' title="'+o[6].split(",")[o[7]-1]+'">：'+o[6].split(",")[o[7]-1]+'</span>                      </div>                                        </div>                               <div class="cart-coupon cart-modify-saleprops">                                     <div class="cart-coupon-box" gui-popupbox="">                                          <div class="js-show-salepropsBox">                  </div></div></div></div></div>            \x3c!--sales property --\x3e\n                                    <div class="cart-col-4 cart-price-height47">     <div class="cart-good-real-price " data-price='+o[3]+">             \x3c!--主品--\x3e       ¥&nbsp;"+o[3]+'                    </div>               <div class="red">           </div>             </div>   <div class="cart-col-5">                                                                <div class="gui-count cart-count">\n                                    <a href="javascript:;" class="gui-count-btn gui-count-sub '+("1"==o[8]?"gui-count-disabled":"")+'">-</a>\n                                    <a href="javascript:;" class="gui-count-btn gui-count-add">+</a>\n                                    <div class="gui-count-input">\n                                        <input  class="dytest " type="text" value="'+o[8]+'">\n                                    </div></div>                           </div>  <div class="cart-col-6 ">      <div class="cart-good-amount">    ¥&nbsp;'+(o[3]*o[8]).toFixed(2)+'       </div>    </div>  </div>  <div class="cart-good-box"></div>  </div>  <div class="cart-col-7">       <div class="cart-good-fun delfixed">     <a href="javascript:;" >     删除     </a>    </div>                         </div>          </div>'}).join("")}).appendTo(e)}$(function(){$.ajaxSetup({url:"../server/addToCart.php",global:!1,type:"POST",success:function(o){console.log(o)}});$(".cart-list").eq(0);var r=$(".selected-item").eq(0),d=$(".selected-price").eq(0),o=$(".dytest"),e=$(".gui-count-add"),c=$(".gui-count-sub"),n=Cookie.get("userId");o.on("input change",function(o){var e=$(o.target).parents(".cart-shop-good").attr("id"),c=$(o.target).val()-0,a=$(o.target).parents(".cart-shop-good").find(".cart-good-value").data("type")-0,s=$(o.target).parents(".cart-shop-good").find(".cart-good-real-price").data("price");console.log(c,s),$(o.target).parents(".cart-shop-good").find(".cart-good-amount").text("¥ "+(c*s).toFixed(2)),$.ajax({data:{id:n,product_code:e,num:c,type:a,flag:1}}),r.text(h()),d.text("￥"+p())}),e.click(function(o){console.log("hello",$(o.target).parent()),$(o.target).parent().find(".gui-count-sub").removeClass("gui-count-disabled");var e=$(o.target).parent().find(".dytest").eq(0);e.val(1*e.val()+1);var c=1*e.val(),a=$(o.target).parents(".cart-shop-good").attr("id"),s=$(o.target).parents(".cart-shop-good").find(".cart-good-value").data("type")-0;$.ajax({data:{id:n,product_code:a,num:c,type:s,flag:1}});var t=$(o.target).parents(".cart-shop-good").find(".cart-good-real-price").data("price");$(o.target).parents(".cart-shop-good").find(".cart-good-amount").text("¥ "+(c*t).toFixed(2)),r.text(h()),d.text("￥"+p())}),c.click(function(o){var e=void 0,c=$(o.target).parent().find(".dytest").eq(0);if(1<c.val()){c.val(c.val()-1),e=1*c.val();var a=$(o.target).parents(".cart-shop-good").attr("id"),s=$(o.target).parents(".cart-shop-good").find(".cart-good-value").data("type")-0;$.ajax({data:{id:n,product_code:a,num:e,type:s,flag:1}})}else c.val(1);e=c.val(),console.log(e),1==e&&$(o.target).addClass("gui-count-disabled");var t=$(o.target).parents(".cart-shop-good").find(".cart-good-real-price").data("price");$(o.target).parents(".cart-shop-good").find(".cart-good-amount").text("¥ "+(e*t).toFixed(2)),r.text(h()),d.text("￥"+p())}),$(".delfixed").click(function(o){if(confirm("确定要删除选中商品吗?")){var e=$(o.target).parents(".cart-shop-good").eq(0),c=$(o.target).parents(".cart-shop-goods").eq(0),a=e.attr("id"),s=e.find(".cart-good-value").data("type")-0;$.ajax({url:"../server/deleteFromCart.php",data:{id:n,product_code:a,type:s},success:function(o){o&&(e.remove(),0==c.children().length&&(c.prev().remove(),c.remove()))}})}}),$(".del-goods").click(function(o){confirm("确定要删除选中商品吗?")&&($(".cart-shop-goods").find(".checkbox_chose").each(function(o,e){var c=$(e).parents(".cart-shop-good").eq(0),a=$(e).parents(".cart-shop-goods").eq(0),s=c.attr("id"),t=c.find(".cart-good-value").data("type")-0;$.ajax({url:"../server/deleteFromCart.php",data:{id:n,product_code:s,type:t},success:function(o){o&&(c.remove(),0==a.children().length&&(a.prev().remove(),a.remove()))}})}),r.text(h()),d.text("￥"+p()))});var t=$(".checkAll"),a=$(".checkShop"),s=$(".checkItem"),i=Array.from(a),l=Array.from(s);function h(){var c=0;return s.each(function(o,e){$(e).is(".checkbox_chose")&&(c+=1*$(e).parents(".cart-shop-good").find(".dytest").eq(0).val())}),c}function p(){var c=0;return s.each(function(o,e){$(e).is(".checkbox_chose")&&(c+=1*$(e).parents(".cart-shop-good").find(".cart-good-amount").eq(0).text().trim().slice(2))}),c.toFixed(2)}t.on("click",function(o){$(o.target).hasClass("checkbox_chose")?(t.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose"),a.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose"),s.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose")):(t.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no"),a.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no"),s.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no")),r.text(h()),d.text("￥"+p())}),a.on("click",function(o){var e=$(o.target).parent().find(".checkShop"),c=e.hasClass("checkbox_chose"),a=e.parents(".cart-shop-header").next().find(".checkItem");c?(e.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose"),a.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose")):(e.removeClass("good-checkboxs-no").addClass("c-i checkbox_chose"),a.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no")),i.every(function(o){return $(o).is(".checkbox_chose")})?t.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no"):i.some(function(o){return $(o).is(".good-checkboxs-no")})&&t.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose"),r.text(h()),d.text("￥"+p())}),s.on("click",function(o){var e=$(o.target),c=$(o.target).hasClass("checkbox_chose"),a=Array.from(e.parents(".cart-shop-goods").find(".checkItem")),s=e.parents(".cart-shop-goods").prev().find(".checkShop");console.log(s),c?e.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose"):e.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no"),a.every(function(o){return $(o).is(".checkbox_chose")})?(s.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no"),l.every(function(o){return $(o).is(".checkbox_chose")})&&t.addClass("c-i checkbox_chose").removeClass("good-checkboxs-no")):a.some(function(o){return $(o).is(".good-checkboxs-no")})&&(s.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose"),t.addClass("good-checkboxs-no").removeClass("c-i").removeClass("checkbox_chose")),r.text(h()),d.text("￥"+p())})});